!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["lorehub-dialog-player"]=t():n["lorehub-dialog-player"]=t()}(this,(function(){return(()=>{"use strict";var n={83:(n,t,e)=>{function o(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}e.r(t);var r=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=t,this.startNode=e,this._currnetNode=e,e.subscribe(this)}var t,e;return t=n,(e=[{key:"currentNode",get:function(){return this._currnetNode}},{key:"finished",get:function(){return null==this._currnetNode.nextNode}},{key:"onNext",value:function(n){this._currnetNode.unsubscribe(this),n.subscribe(this),this._currnetNode=n}}])&&o(t.prototype,e),n}();function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function a(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var s=function(){function n(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i(this,n),null==t||null==e)throw new Error("Cannot create DialogNode because id: ".concat(t," or content: ").concat(e," is null."));this.id=t,this.nextNode=o,null==e.length?this.content=[e]:this.content=e,this.subscribers=[]}var t,e;return t=n,(e=[{key:"goNext",value:function(){var n=this;if(null==this.nextNode)throw new Error("NextNode is null, so I cannot go to next one.");this.subscribers.forEach((function(t){t.onNext(n.nextNode)}))}},{key:"subscribe",value:function(n){if(null==n.onNext)throw new Error("You cannot subscribe because 'onNext' function is not defined.");this.subscribers.push(n)}},{key:"unsubscribe",value:function(n){var t=this.subscribers.findIndex((function(t){return t===n}));t>-1&&this.subscribers.splice(t,1)}}])&&a(t.prototype,e),n}(),u=function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=t,this.value=e};function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(n=e.hmd(n)).exports={convertDataToDialog:function(n,t,e){if(null==n||null==t||null==e)throw new Error("Cannot convert DTOs to a Dialog because \n      dialogDTO: ".concat(n," cannot be null OR \n      dialogNodesDTO: ").concat(t," cannot be null OR \n      contentBlocksDTO: ").concat(e," cannot be null."));var o=function(n,t){for(var e=[],o=function(o){for(var r=n[o],i=t.filter((function(n){return n.dialogNodeId==r.id})).sort((function(n,t){return n.index>t.index?1:-1})),a=[],c=0;c<i.length;c++){var l=i[c];if("text"!==l.type)throw new Error("Cannot convert to DialogContent for type ".concat(l.type,"."));var d=new u(l.id,l.data[0].text);a.push(d)}e.push(new s(r.id,a,null))},r=0;r<n.length;r++)o(r);for(var i=function(t){var o=n[t],r=e[t];o.nextDialogNodeId&&(r.nextNode=e.find((function(n){return n.id===o.nextDialogNodeId})))},a=0;a<e.length;a++)i(a);return e}(t,e).find((function(t){return t.id===n.startingNodeId}));if(null==o)throw new Error("Cannot find starting node with id ".concat(n.startingNodeId,"."));return new r(n.id,o)},Dialog:r,DialogNode:s,DialogTextContent:u,ContetnBlockDTO:function n(t,e,o,r,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=t,this.dialogNodeId=e,this.type=o,this.index=r,this.data=i},DialogDTO:function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=t,this.startingNodeId=e},DialogNodeDTO:function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(this,n),this.id=t,this.nextDialogNodeId=e}}}},t={};function e(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return n[o](i,i.exports,e),i.loaded=!0,i.exports}return e.hmd=n=>((n=Object.create(n)).children||(n.children=[]),Object.defineProperty(n,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+n.id)}}),n),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e(83)})()}));